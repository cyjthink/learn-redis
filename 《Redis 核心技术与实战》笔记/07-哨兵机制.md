1. 哨兵：运行在特殊模式下的redis进程
2. 哨兵负责的内容：
   1. 监控（判断主库是否宕机）：周期性的给主从库发送ping命令检测是否在线
      1. 主观下线：某个哨兵判断为已下线
      2. 客观下线：大多数哨兵判断为主观下线
      3. 只有客观下线后才会启动主从切换
   2. 选择主库（判断该选择哪个从库作为新主库）
      1. 筛选：检查从库当前在线状态和之前网络连接状态（down-after-milliseconds：主从库断连的最大连接超时时间）
      2. 打分：（只要某一轮有从库得分最高，那它就是主库）
         1. 优先级最高的从库得分高
         2. 和就主库同步程度最接近的得分高
         3. ID号小的从库得分高
   3. 通知（通知其他从库、客户端新的主库信息）：
      1. 把新主库的信息发给其他从库，让它们执行replicaof命令，和新主库建立连接并进行数据复制
      2. 把新主库的信息发送给客户端，让它们把请求操作发到新主库上